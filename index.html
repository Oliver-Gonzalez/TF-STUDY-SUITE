<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TF Phase Study Suite</title>
    <style>
        :root {
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --accent: #10b981;
            --marking-green: #007a33;
            --accent-hover: #059669;
            --error: #ef4444;
            --border: #e2e8f0;
            --highlight: #f1f5f9;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 10px 20px 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Classification Marking Style */
        .marking {
            color: var(--marking-green);
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 1px;
            margin: 10px 0;
            text-transform: uppercase;
        }

        .quiz-container {
            width: 100%;
            max-width: 650px;
            padding-bottom: 60px;
        }

        .selector-box {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
        }

        select {
            padding: 10px 15px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: white;
            color: var(--text-main);
            cursor: pointer;
            width: 80%;
            outline: none;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        /* Bold Title */
        h1 {
            font-weight: 800;
            letter-spacing: -1px;
            margin-bottom: 8px;
        }

        #results-summary {
            display: none;
            position: sticky;
            top: 10px;
            z-index: 100;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            border: 2px solid var(--accent);
            text-align: center;
            margin-bottom: 30px;
        }

        .score-text {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        .question-card {
            background: var(--card-bg);
            padding: 30px;
            margin-bottom: 24px;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .option-item {
            margin-bottom: 12px;
        }

        .option-item label {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .option-item label:hover {
            background-color: var(--highlight);
        }

        input[type="radio"] {
            margin-right: 12px;
            accent-color: var(--accent);
            width: 18px;
            height: 18px;
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 16px;
            background-color: var(--text-main);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .submit-btn:hover { opacity: 0.9; }

        .feedback-area {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed var(--border);
            display: none;
            font-weight: 600;
        }

        .is-correct { background-color: #ecfdf5 !important; border-color: var(--accent) !important; color: #065f46; }
        .is-incorrect { background-color: #fef2f2 !important; border-color: var(--error) !important; color: #991b1b; }
        
        .correct-reveal {
            display: block;
            margin-top: 8px;
            color: var(--accent);
            font-size: 0.9rem;
            background: #f0fdf4;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #dcfce7;
        }

        .hidden { display: none !important; }

        @media (max-width: 480px) {
            .question-card { padding: 20px; }
        }
    </style>
</head>
<body>

    <div class="marking">UNCLASSIFIED</div>

    <div class="quiz-container">
        <header>
            <h1>TF STUDY SUITE</h1>
            <p id="quiz-subtitle" style="color: var(--text-muted);">Select a Quiz to Begin</p>
        </header>

        <div class="selector-box">
            <label for="quizSelector" style="display:block; margin-bottom:10px; font-weight:600;">Active Quiz:</label>
            <select id="quizSelector" onchange="initQuiz()">
                <option value="" disabled selected>Choose a section...</option>
                <option value="mqf">TF MQF Study Guide (40 Questions)</option>
                <option value="threat">TF Threat Parameters (29 Questions)</option>
            </select>
        </div>

        <div id="results-summary">
            <p class="score-text">Score: <span id="finalScore">0%</span></p>
            <p id="scoreDetail" style="margin: 5px 0 15px 0; color: var(--text-muted);"></p>
            <button class="submit-btn" style="background: var(--accent); padding: 10px;" onclick="initQuiz()">Reset Current Quiz</button>
        </div>

        <form id="quizForm" class="hidden">
            <div id="questions-wrapper"></div>
            <button type="button" id="main-submit" class="submit-btn" onclick="evaluateQuiz()">Submit and Review Answers</button>
        </form>
    </div>

    <div class="marking">UNCLASSIFIED</div>

    <script>
        const mqfData = [
            { q: "What is the standard setting for Chaff and Flares per the phase manual? (TF PM 2.1.6)", options: ["Chaff and Flare program is 2, 0.1, 2, 1.0 for chaff and 4, 4.0 for flares.", "Chaff and Flare program is 2, 0.2, 1, 2.0 for chaff and 4, 4.0 for flares.", "Chaff and Flare program is 2, 0.2, 2, 2.0 for chaff and 4, 4.0 for flares.", "Chaff and Flare program is 1, 0.2, 1, 2.0 for chaff and 4, 4.0 for flares."], correctText: "Chaff and Flare program is 2, 0.1, 2, 1.0 for chaff and 4, 4.0 for flares." },
            { q: "What is the max Airspeed in the T-25? (TF PM 2.2.3)", options: ["320 KIAS", "330 KIAS", "350 KIAS", "410 KIAS"], correctText: "330 KIAS" },
            { q: "What DSP setting will be utilized during the TF sim while enroute? (TF PM 2.1.3)", options: ["TAC/TAC", "TAC/LOC", "FMS/TAC", "FMS/FMS"], correctText: "FMS/FMS" },
            { q: "What is the timing window for the push point? (TF PM 2.5.2)", options: ["+/- 2 min", "+/- 5 min", "+/- 3 min", "+/- 1 min"], correctText: "+/- 1 min" },
            { q: "What is the timing window for the target? (TF PM 2.5.2)", options: ["+/- 2 min", "+/- 5 min", "+/- 3 min", "+/- 1 min"], correctText: "+/- 2 min" },
            { q: "What is the TOF for the weapons? (TF PM 2.5.3)", options: ["10 seconds", "20 seconds", "30 seconds", "25 seconds"], correctText: "30 seconds" },
            { q: "When being engaged by a SAM in search mode, at what clock position should the aircraft be during a LEAN maneuver? (TF PM 2.9.1.2)", options: ["At or behind the 9 or 3 o'clock position", "Between the 10-9 or 2-3 o'clock position", "At or behind the 11 or 1 o'clock position", "At or behind the 12 or 6 o'clock position"], correctText: "Between the 10-9 or 2-3 o'clock position" },
            { q: "When being engaged by a SAM in track mode, at what clock position should the aircraft be during a BREAK maneuver? (TF PM 2.9.1.2)", options: ["Between the 9-7 or 3-5 o'clock position", "At or behind the 10 or 2 o'clock position", "At or behind the 11 or 1 o'clock position", "At or behind the 12 or 6 o'clock position"], correctText: "Between the 9-7 or 3-5 o'clock position" },
            { q: "When being engaged by a SAM launch mode, at what clock position should the aircraft be during a BREAK maneuver? (TF PM 2.9.1.2)", options: ["At or behind the 9 or 3 o'clock position", "At or behind the 10 or 2 o'clock position", "At or behind the 5 or 7 o'clock position", "At or behind the 12 or 6 o'clock position"], correctText: "At or behind the 5 or 7 o'clock position" },
            { q: "What expendables are used against a SAM in search mode? (TF PM 2.9.1.3)", options: ["Chaff", "Flares", "Chaff and Flares", "None"], correctText: "None" },
            { q: "What expendables are used against a SAM in track mode? (TF PM 2.9.1.3)", options: ["Chaff", "Flares", "Chaff and Flares", "None"], correctText: "Chaff" },
            { q: "When being engaged by ADA in search mode, at what clock position should the aircraft be during a LEAN maneuver? (TF PM 2.9.2.2)", options: ["At or behind the 9 or 3 o'clock position", "Between the 10-9 or 2-3 o'clock position", "At or behind the 11 or 1 o'clock position", "At or behind the 12 or 6 o'clock position"], correctText: "Between the 10-9 or 2-3 o'clock position" },
            { q: "When being engaged by ADA in track mode, at what clock position should the aircraft be during a BREAK maneuver? (TF PM 2.9.2.2)", options: ["Between the 9-7 or 3-5 o'clock position", "At or behind the 10 or 2 o'clock position", "At or behind the 11 or 1 o'clock position", "At or behind the 12 or 6 o'clock position"], correctText: "Between the 9-7 or 3-5 o'clock position" },
            { q: "What maneuver is executed when engaged by an AI that is greater than 30 NM? (TF PM 2.9.3.2)", options: ["NOTCH", "BREAK", "OUT", "LEAN"], correctText: "OUT" },
            { q: "What maneuver is executed when engaged by an AI between 30 NM and 10 NM? (TF PM 2.9.3.2)", options: ["NAILS", "NOTCH", "OUT", "LEAN"], correctText: "NOTCH" },
            { q: "What maneuver is executed when friendly fighters have targeted the AI and 'Commit' has been called by them? (TF PM 2.9.3.2)", options: ["NAILS", "NOTCH", "OUT", "LEAN"], correctText: "OUT" },
            { q: "What clock position is the AI supposed to be placed at during an OUT maneuver? (TF PM 2.9.3.2)", options: ["Between 5 and 7 o'clock", "Between 4 and 8 o'clock", "Between 11 and 1 o'clock", "Between 9 and 3 o'clock"], correctText: "Between 5 and 7 o'clock" },
            { q: "What clock position is the AI supposed to be placed at during a NOTCH maneuver? (TF PM 2.9.3.2)", options: ["On the 5 or 7 o'clock", "On the 4 or 8 o'clock", "On the 11 or 1 o'clock", "On the 9 or 3 o'clock"], correctText: "On the 9 or 3 o'clock" },
            { q: "What expendables are used against an AI when performing a NOTCH? (TF PM 2.9.3.3)", options: ["Chaff", "Flares", "Chaff and Flares", "None"], correctText: "Chaff" },
            { q: "At what speed will munitions be released? (TF PM 2.10.2)", options: ["300 TAS +/-30 kts", "300 CAS +/-30 kts", "300 GS +/-30 kts", ".70 MACH +/-0.1 MACH"], correctText: "300 GS +/-30 kts" },
            { q: "What is the nautical mile distance for the LAR as defined in the TF phase manual? (TF PM 2.10.1)", options: ["1.5-4.0", "1.0-3.5", "1.5-4.5", "0.5-4.0"], correctText: "0.5-4.0" },
            { q: "How far from the target is the Cease Maneuver Point (CMP)? (TF PM 2.10.3)", options: ["10 NM", "11 NM", "16 NM", "15 NM"], correctText: "16 NM" },
            { q: "What DSP settings will be used for all approaches in the TF phase? (TF PM 2.12.2)", options: ["FMS/FMS", "TAC/LOC", "TAC/TAC", "FMS/LOC"], correctText: "TAC/TAC" },
            { q: "Radar warning receiver indication of surface threat in search mode is the definition of which term? (TF PM Attachment 1)", options: ["DIRT", "MUD", "NAILS", "SPIKE"], correctText: "DIRT" },
            { q: "Radar warning receiver indication of surface threat in track mode is the definition of which term? (TF PM Attachment 1)", options: ["DIRT", "MUD", "NAILS", "SPIKE"], correctText: "MUD" },
            { q: "What is the max range of an SA-11 GADFLY? (TF Attachment 11)", options: ["23", "25", "20", "17"], correctText: "17" },
            { q: "What is the max range of an S-60? (TF Attachment 11)", options: ["3.5", "4.5", "6.5", "7.5"], correctText: "6.5" },
            { q: "What is the max range of an SA-2 GUIDELINE? (TF PM Attachment 11)", options: ["25.7", "20.6", "23.2", "21.5"], correctText: "23.2" },
            { q: "What is the max range of an SA-3 GOA? (TF PM Attachment 11)", options: ["17", "13", "13.4", "20"], correctText: "13" },
            { q: "What is the max range of an 2S6 HOTSHOT? (TF PM Attachment 11)", options: ["6.5", "5.5", "4.5", "5"], correctText: "4.5" },
            { q: "What is the max range of an SA-6 GAINFUL? (TF PM Attachment 11)", options: ["13", "13.4", "17", "6"], correctText: "13.4" },
            { q: "What radar is associated with the SA-8 GECKO? (TF PM Attachment 11)", options: ["POP GROUP", "FAN SONG", "THIN SKIN", "LAND ROLL"], correctText: "LAND ROLL" },
            { q: "What radar is associated with the SA-2 GUIDELINE? (TF PM Attachment 11)", options: ["POP GROUP", "FAN SONG", "THIN SKIN", "LAND ROLL"], correctText: "FAN SONG" },
            { q: "What radar is associated with the SA-3 GOA? (TF PM Attachment 11)", options: ["POP GROUP", "LOW BLOW", "BILLBOARD", "THIN SKIN"], correctText: "LOW BLOW" },
            { q: "What will the crew briefing include? (TF PM 2.2.8)", options: ["Current early/late status to the Push Point", "Target description and TOT", "Changes to the lowdown and/or picture", "All of the above"], correctText: "All of the above" },
            { q: "The FMS overlay will be turned full off at the beginning of the mission. (TF PM 2.4.1)", options: ["True", "False"], correctText: "True" },
            { q: "Prior to calling 'TARGET CAPTURED' what setting do you have to be in (TF PM 2.4.3)", options: ["Zoom 4", "Radar frozen", "No larger than 20 NM scope", "All of the above"], correctText: "All of the above" },
            { q: "If required to maneuver for a threat prior to completing the Post-Strike checklist, ensure the weapons are set to 'SAFE' and the bomb bay doors are closed prior to maneuvering. (TF PM 2.10.8)", options: ["True", "False"], correctText: "True" },
            { q: "Which of the following are mandatory advisory calls required for a non-precision approach? (AFMAN 11-2T-1V3 3.21)", options: ["'One hundred feet above' MDA", "'Minimums' at MDA", "'Runway in sight' Runway environment will remain in sight", "All of the above"], correctText: "All of the above" },
            { q: "UCSO will deselect 'Radius' on top right of moving map during the Power-On checklist. (TF PM 2.1.7)", options: ["True", "False"], correctText: "True" }
        ];

        const threatData = [
            { q: "What is the max range of the SA-2 GUIDELINE?", options: ["13", "15", "13.4", "23.2"], correctText: "23.2" },
            { q: "What is the max range of the SA-3 GOA?", options: ["14", "13", "13.4", "15"], correctText: "13" },
            { q: "What is the max range of the SA-6 GAINFUL", options: ["17", "14.4", "15", "13.4"], correctText: "13.4" },
            { q: "What is the max range of the SA-8 GECKO?", options: ["5.5", "6.5", "7", "4.5"], correctText: "5.5" },
            { q: "What is the max range of the SA-11 GADFLY?", options: ["23.2", "18", "17", "14"], correctText: "17" },
            { q: "What is the max range of the SA-12A GLADIATOR?", options: ["30", "54", "40", "23.2"], correctText: "40" },
            { q: "What is the max range of the SA-12B GIANT?", options: ["54", "40", "35", "13.4"], correctText: "54" },
            { q: "What is the max range of the SA-15 GAUNTLET?", options: ["5.5", "6.5", "4.5", "6"], correctText: "6.5" },
            { q: "What is the max range of the SA-N-4 GECKO?", options: ["6.5", "6", "4.5", "5.5"], correctText: "5.5" },
            { q: "What is the max range of the ZSU-23-4?", options: ["3.5", "4.5", "6.5", "5.5"], correctText: "3.5" },
            { q: "What is the max range of the 2S6?", options: ["5.5", "6.5", "4.5", "3.5"], correctText: "4.5" },
            { q: "What is the max range of the S-60?", options: ["5.5", "6.5", "4.5", "4"], correctText: "6.5" },
            { q: "What is the primary radar associated with the SA-2 GUIDELINE?", options: ["FAN SONG", "STRAIGHT FLUSH", "FIRE DOME", "SCRUM HALF"], correctText: "FAN SONG" },
            { q: "What is the primary radar associated with the SA-3 GOA?", options: ["POP GROUP", "LOW BLOW", "GRILL PAN", "HOTSHOT"], correctText: "LOW BLOW" },
            { q: "What is the primary radar associated with the SA-6 GAINFUL", options: ["LAND ROLL", "GUNDISH", "SCRUM HALF", "STRAIGHT FLUSH"], correctText: "STRAIGHT FLUSH" },
            { q: "What is the primary radar associated with the SA-8 GECKO?", options: ["GRILL PAN", "FIRECAN", "LAND ROLL", "FLAPWHEEL"], correctText: "LAND ROLL" },
            { q: "What is the primary radar associated with the SA-11 GADFLY?", options: ["FIRE DOME", "FAN SONG", "STRAIGHT FLUSH", "FIRECAN"], correctText: "FIRE DOME" },
            { q: "What is the primary radar associated with the SA-12A/B?", options: ["SCRUM HALF", "POP GROUP", "GRILL PAN", "HOTSHOT"], correctText: "GRILL PAN" },
            { q: "What is the primary radar associated with the SA-15 GAUNTLET?", options: ["LAND ROLL", "FAN SONG", "STRAIGHT FLUSH", "SCRUM HALF"], correctText: "SCRUM HALF" },
            { q: "What is the primary radar associated with the SA-N-4 GECKO?", options: ["FLAPWHEEL", "POP GROUP", "LOW BLOW", "GRILL PAN"], correctText: "POP GROUP" },
            { q: "What is the primary radar associated with the ZSU-23-4?", options: ["GUNDISH", "FIRE DOME", "LAND ROLL", "SCRUM HALF"], correctText: "GUNDISH" },
            { q: "What is the primary radar associated with the 2S6?", options: ["FIRECAN", "HOTSHOT", "GUNDISH", "FAN SONG"], correctText: "HOTSHOT" },
            { q: "What is the primary radar associated with the S-60?", options: ["GRILL PAN", "LOW BLOW", "FIRECAN", "LAND ROLL"], correctText: "FIRECAN" },
            { q: "What is the primary radar associated with the MIG-21", options: ["FOXFIRE", "JAYBIRD", "SLOTBACK 2", "FLASH DANCE"], correctText: "JAYBIRD" },
            { q: "What is the primary radar associated with the MIG-31?", options: ["SLOTBACK 1", "SPIN SCAN", "FLASH DANCE", "JAYBIRD"], correctText: "FLASH DANCE" },
            { q: "What is the primary radar associated with the MIG-23?", options: ["HIGH LARK 4", "HIGH LARK 2", "SLOTBACK 2", "FOXFIRE"], correctText: "HIGH LARK 2" },
            { q: "What is the primary radar associated with the MIG-25?", options: ["HIGH LARK 2", "FLASH DANCE", "HIGH LARK 4", "JAYBIRD"], correctText: "HIGH LARK 4" },
            { q: "What is the primary radar associated with the MIG-29?", options: ["JAYBIRD", "SLOTBACK 1", "HIGH LARK 2", "FLASH DANCE"], correctText: "SLOTBACK 1" },
            { q: "What is the primary radar associated with the SU-27?", options: ["HIGH LARK 4", "JAYBIRD", "FOXFIRE", "SLOTBACK 2"], correctText: "SLOTBACK 2" }
        ];

        let currentActiveData = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function shuffleOptions(options) {
            let optionsCopy = [...options];
            const allAboveIndex = optionsCopy.findIndex(opt => 
                opt.toLowerCase().includes("all of the above") || opt.toLowerCase().includes("all the above")
            );

            let allAbove = null;
            if (allAboveIndex > -1) {
                allAbove = optionsCopy.splice(allAboveIndex, 1)[0];
            }

            shuffleArray(optionsCopy);

            if (allAbove) {
                optionsCopy.push(allAbove);
            }
            return optionsCopy;
        }

        function initQuiz() {
            const selectedValue = document.getElementById('quizSelector').value;
            if (!selectedValue) return;

            document.getElementById('quizForm').classList.remove('hidden');
            document.getElementById('results-summary').style.display = 'none';
            document.getElementById('main-submit').style.display = 'block';
            document.getElementById('questions-wrapper').innerHTML = '';

            currentActiveData = selectedValue === 'mqf' ? [...mqfData] : [...threatData];
            shuffleArray(currentActiveData);

            const wrapper = document.getElementById('questions-wrapper');
            currentActiveData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `card-${index}`;
                
                const shuffledOpts = shuffleOptions(item.options);
                item.currentCorrectIndex = shuffledOpts.indexOf(item.correctText);
                item.currentOptions = shuffledOpts;

                let optionsHTML = '';
                shuffledOpts.forEach((opt, i) => {
                    optionsHTML += `
                        <div class="option-item">
                            <label id="label-${index}-${i}">
                                <input type="radio" name="q${index}" value="${i}">
                                ${opt}
                            </label>
                        </div>
                    `;
                });

                card.innerHTML = `
                    <div class="question-text">${item.q}</div>
                    <div class="options-list">${optionsHTML}</div>
                    <div id="feedback-${index}" class="feedback-area"></div>
                `;
                wrapper.appendChild(card);
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function evaluateQuiz() {
            let correctCount = 0;
            const inputs = document.querySelectorAll('input[type="radio"]');

            currentActiveData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                const feedback = document.getElementById(`feedback-${index}`);
                feedback.style.display = 'block';
                
                if (selected) {
                    const userVal = parseInt(selected.value);
                    if (userVal === item.currentCorrectIndex) {
                        correctCount++;
                        document.getElementById(`label-${index}-${userVal}`).classList.add('is-correct');
                        feedback.innerHTML = '<span style="color: var(--accent)">✓ Correct</span>';
                    } else {
                        document.getElementById(`label-${index}-${userVal}`).classList.add('is-incorrect');
                        feedback.innerHTML = `<span style="color: var(--error)">✗ Incorrect</span>
                            <div class="correct-reveal">Correct Answer: ${item.correctText}</div>`;
                    }
                } else {
                    feedback.innerHTML = `<span style="color: var(--error)">✗ Skipped</span>
                        <div class="correct-reveal">Correct Answer: ${item.correctText}</div>`;
                }
            });

            inputs.forEach(input => input.disabled = true);
            document.getElementById('main-submit').style.display = 'none';
            
            const scorePercent = Math.round((correctCount / currentActiveData.length) * 100);
            document.getElementById('results-summary').style.display = 'block';
            document.getElementById('finalScore').innerText = scorePercent + "%";
            document.getElementById('scoreDetail').innerText = `Completed: ${correctCount} / ${currentActiveData.length}. Review your answers below.`;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
